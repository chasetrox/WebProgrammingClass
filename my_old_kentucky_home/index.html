<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>My Old Kentucky Home</title>
<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>

<h1 id="title">My Old Kentucky Home</h1>

<video src="https://www.cs.tufts.edu/comp/20/my_old_kentucky_home.mp4" id="music_video" controls></video>
<div id="lyrics"></div>

<script>
        var div = document.getElementById('lyrics');
        var video = document.getElementById("music_video");
        var lyric_table = {9:
        "The sun shines bright in My Old Kentucky Home,\
        'Tis summer, the people are gay;<br>\
        The corn-top's ripe and the meadow's in the bloom<br>\
        While the birds make music all the day.<br>",
        25: {src: "corn.jpg", alt: "image of corn"},
        35:
        "The young folks roll on the little cabin floor,\
        All merry, all happy and bright;\
        By 'n' by hard times comes a knocking at the door,\
        Then My Old Kentucky Home, good night!",
        40: {src: "cabin.jpg", alt: "image of a cabin"},
        63:
        "Weep no more my lady\
        Oh weep no more today;\
        We will sing one song\
        For My Old Kentucky Home\
        For My Old Kentucky Home, far away"
        };

        function create_img(src, alt) {
                var img = new Image();
                img.src = src;
                img.alt = alt;
                return img;
        }
        function annotate() {
                currTime = video.currentTime.toFixed(0);
                if (lyric_table[currTime] == undefined)
                        return;
                if (currTime == 25 || currTime == 40) {
                        var img = create_img(lyric_table[currTime]["src"],
                                         lyric_table[currTime]["alt"]);
                        div.appendChild(img);
                        return;
                }
                if (document.getElementsByTagName('img')[0] != undefined) {
                        div.removeChild(document.getElementsByTagName('img')[0]);
                }
                div.innerText = lyric_table[currTime];
        }
        video.addEventListener("timeupdate", annotate, false);


</script>
</body>
</html>
